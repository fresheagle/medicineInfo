<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.med.info.mapper.Miss_departmentMapper">
	<resultMap id="BaseResultMap"
		type="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="department_name" jdbcType="VARCHAR"
			property="departmentName" />
		<result column="level" jdbcType="VARCHAR" property="level" />
		<result column="parent_department_id" jdbcType="BIGINT"
			property="parentDepartmentId" />
		<result column="dataStatus" jdbcType="VARCHAR"
			property="datastatus" />
		<result column="task_id" jdbcType="VARCHAR" property="taskId" />
		<result column="task_status" jdbcType="VARCHAR"
			property="taskStatus" />
	</resultMap>
	
	
	<resultMap type="com.med.info.mapper.domain.DepartmentMapDTO"
		id="DepartmentMapResult">
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="department_name" jdbcType="VARCHAR"
			property="departmentName" />
		<result column="parent_department_id" jdbcType="BIGINT"
				property="parentDepartmentId" />

	</resultMap>

	
	<resultMap extends="BaseResultMap" id="ResultMapWithBLOBs"
		type="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		<result column="task_json" jdbcType="LONGVARCHAR"
			property="taskJson" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		id, department_name, level, parent_department_id, dataStatus, task_id,
		task_status
	</sql>
	<sql id="Blob_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		task_json
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="ResultMapWithBLOBs">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from miss_department
		where id = #{id,jdbcType=BIGINT}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		delete from miss_department
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<insert id="insert"
		parameterType="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		insert into miss_department (department_name, level,
		parent_department_id, dataStatus, task_id,
		task_status, task_json)
		values (#{departmentName,jdbcType=VARCHAR},
		#{level,jdbcType=VARCHAR},
		#{parentDepartmentId,jdbcType=BIGINT}, #{datastatus,jdbcType=VARCHAR}, #{taskId,jdbcType=VARCHAR},
		#{taskStatus,jdbcType=VARCHAR}, #{taskJson,jdbcType=LONGVARCHAR})
		<selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
			select last_insert_id()
		</selectKey>
	</insert>
	<insert id="insertSelective"
		parameterType="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		insert into miss_department
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="departmentName != null">
				department_name,
			</if>
			<if test="level != null">
				level,
			</if>
			<if test="parentDepartmentId != null">
				parent_department_id,
			</if>
			<if test="datastatus != null">
				dataStatus,
			</if>
			<if test="taskId != null">
				task_id,
			</if>
			<if test="taskStatus != null">
				task_status,
			</if>
			<if test="taskJson != null">
				task_json,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="departmentName != null">
				#{departmentName,jdbcType=VARCHAR},
			</if>
			<if test="level != null">
				#{level,jdbcType=VARCHAR},
			</if>
			<if test="parentDepartmentId != null">
				#{parentDepartmentId,jdbcType=BIGINT},
			</if>
			<if test="datastatus != null">
				#{datastatus,jdbcType=VARCHAR},
			</if>
			<if test="taskId != null">
				#{taskId,jdbcType=VARCHAR},
			</if>
			<if test="taskStatus != null">
				#{taskStatus,jdbcType=VARCHAR},
			</if>
			<if test="taskJson != null">
				#{taskJson,jdbcType=LONGVARCHAR},
			</if>
		</trim>
		<selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
			select last_insert_id()
		</selectKey>
	</insert>
	<update id="updateByPrimaryKeySelective"
		parameterType="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by `
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		update miss_department
		<set>
			<if test="departmentName != null">
				department_name = #{departmentName,jdbcType=VARCHAR},
			</if>
			<if test="level != null">
				level = #{level,jdbcType=VARCHAR},
			</if>
			<if test="parentDepartmentId != null">
				parent_department_id = #{parentDepartmentId,jdbcType=BIGINT},
			</if>
			<if test="datastatus != null">
				dataStatus = #{datastatus,jdbcType=VARCHAR},
			</if>
			<if test="taskId != null">
				task_id = #{taskId,jdbcType=VARCHAR},
			</if>
			<if test="taskStatus != null">
				task_status = #{taskStatus,jdbcType=VARCHAR},
			</if>
			<if test="taskJson != null">
				task_json = #{taskJson,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKeyWithBLOBs"
		parameterType="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		update miss_department
		set department_name = #{departmentName,jdbcType=VARCHAR},
		level = #{level,jdbcType=VARCHAR},
		parent_department_id = #{parentDepartmentId,jdbcType=BIGINT},
		dataStatus = #{datastatus,jdbcType=VARCHAR},
		task_id = #{taskId,jdbcType=VARCHAR},
		task_status = #{taskStatus,jdbcType=VARCHAR},
		task_json = #{taskJson,jdbcType=LONGVARCHAR}
		where id = #{id,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey"
		parameterType="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02 
			19:04:02 CST 2018. -->
		update miss_department
		set department_name = #{departmentName,jdbcType=VARCHAR},
		level = #{level,jdbcType=VARCHAR},
		parent_department_id = #{parentDepartmentId,jdbcType=BIGINT},
		dataStatus = #{datastatus,jdbcType=VARCHAR},
		task_id = #{taskId,jdbcType=VARCHAR},
		task_status = #{taskStatus,jdbcType=VARCHAR}
		where id = #{id,jdbcType=BIGINT}
	</update>
	<update id="updateByTaskIdSelective" parameterType="com.med.info.domain.Miss_department">
		<!-- WARNING - @mbg.generated This element is automatically generated by `
			MyBatis Generator, do not modify. This element was generated on Sun Dec 02
			19:04:02 CST 2018. -->
		update miss_department
		<set>
			<if test="departmentName != null">
				department_name = #{departmentName,jdbcType=VARCHAR},
			</if>
			<if test="level != null">
				level = #{level,jdbcType=VARCHAR},
			</if>
			<if test="parentDepartmentId != null">
				parent_department_id = #{parentDepartmentId,jdbcType=BIGINT},
			</if>
			<if test="datastatus != null">
				dataStatus = #{datastatus,jdbcType=VARCHAR},
			</if>
			<if test="taskId != null">
				task_id = #{taskId,jdbcType=VARCHAR},
			</if>
			<if test="taskStatus != null">
				task_status = #{taskStatus,jdbcType=VARCHAR},
			</if>
			<if test="taskJson != null">
				task_json = #{taskJson,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where task_id = #{taskId,jdbcType=VARCHAR}
	</update>
	<sql id="Param_Column_List">
		<!-- 用来返回参数列表 -->
		id, department_name
	</sql>
	<!-- <select id="showDataCondition" parameterType="com.med.info.domain.Miss_department" 
		resultMap="ResultMapWithBLOBs"> 查询部门参数 select <include refid="Base_Column_List" 
		/> from miss_department <where> <if test="id != null"> id = #{id,jdbcType=BIGINT} 
		</if> <if test="departmentName != null"> and department_name = #{departmentName,jdbcType=VARCHAR} 
		</if> </where> </select> -->

	<select id="getDepartmentMapByIds"
		resultMap="DepartmentMapResult">
		select
		<include refid="Param_Column_List" />
		from miss_department
		where id in
		<foreach collection="list" item="id" open="(" close=")"
			separator=",">
			#{id}
		</foreach>
	</select>
	<select id="showDataCondition"
		parameterType="com.med.info.domain.Miss_department"
		resultMap="ResultMapWithBLOBs">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from miss_department
		<where>
			<if test="id != null">
				id = #{Id,jdbcType=BIGINT}
			</if>
			<if test="parentDepartmentId != null">
				and parent_department_id = #{parentDepartmentId,jdbcType=BIGINT}
			</if>
			<if test="departmentName != null">
				and department_name = #{departmentName,jdbcType=BIGINT}
			</if>
		</where>
	</select>
	<select id="getDepartmentMapByDoctorId" parameterType="java.lang.Long"
		resultMap="DepartmentMapResult">
		select
		b.id as id, b.department_name as department_name , b.parent_department_id as parent_department_id
		from miss_department_doctor_mapping a left join miss_department b on a.department_id = b.id where a.doctor_id = #{id}
	</select>
	
	<select id="getDepartmentMapByInstitutionId" parameterType="java.lang.Long"
		resultMap="DepartmentMapResult">
		select
		b.id as id, b.department_name as department_name , b.parent_department_id as parent_department_id
		from miss_institution_keypartment_mapping a left join miss_department b on a.department_id = b.id where a.institution_id = #{id}
		</select>

</mapper>