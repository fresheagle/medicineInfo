<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.med.info.mapper.UserInfoMapper">
	<resultMap type="com.med.info.domain.UserInfo" id="userInfo">
		<result column="id" property="id"/>
		<result column="uname" property="uname" jdbcType="VARCHAR" />
    	<result column="passwd" property="passwd" jdbcType="VARCHAR" />
    	<result column="gentle" property="gentle" jdbcType="VARCHAR" />
    	<result column="email" property="email" jdbcType="VARCHAR" />
    	<result column="city" property="city" jdbcType="VARCHAR" />
	</resultMap>
	
	<sql  id="Select_Where_Clause">
    <trim prefix="where" prefixOverrides="and|or">
      <if test="uname != null">
         and uname = #{uname,jdbcType=VARCHAR}
      </if>
      <if test="passwd != null">
         and passwd = #{passwd,jdbcType=VARCHAR}
      </if>
      <if test="email != null">
         and email = #{email,jdbcType=VARCHAR}
      </if>
    </trim>
  </sql>
	
	<insert id="save" parameterType="com.med.info.domain.UserInfo">
		insert into user_inf(uname, passwd, gentle, email, city) values (#{uname},#{passwd},#{gentle},#{email},#{city});
	</insert>
	
	<delete id="deleteByPrimaryKey" parameterType="Long">
		delete from user_inf where id = #{id}
	</delete>
	
	<select id="select" parameterType="com.med.info.domain.UserInfo" resultMap="userInfo">
		select * from user_inf <include refid="Select_Where_Clause" />
	</select>
	
	<select id="selectList" parameterType="com.med.info.domain.UserInfo" resultMap="userInfo">
		select * from user_inf <include refid="Select_Where_Clause" />
	</select>
	
	<update id="update" parameterType="com.med.info.domain.UserInfo"></update>
	
	<select id="findUserByUnameAndPasswd" parameterType="String" resultMap="userInfo">
		select * from user_inf where uname = #{uname} and passwd = #{passwd}
	</select>
</mapper>